---
  name: 'Call Deploy Sourcemaps'
  on:
    workflow_dispatch:
      inputs:
        environment:
          type: choice
          description: environment to deploy
          options:
            - dev
            - test
  
  jobs:
    deploy-sourcemaps:
      uses: ./.github/workflows/deploy-sourcemaps.yaml
      with:
        env: ${{ github.event.inputs.environment }}
        base_url: ${{ vars.NEW_RELIC_SOURCEMAPS_BASE_URL }}
        new_relic_app_id: ${{ vars.NEW_RELIC_APP_ID }}
        install_cmd: 'npm install'
        build_cmd: 'npm run build:with-sourcemaps'
      secrets:
        NEW_RELIC_API_USER_KEY: ${{ secrets.NEW_RELIC_API_USER_KEY }}
  
